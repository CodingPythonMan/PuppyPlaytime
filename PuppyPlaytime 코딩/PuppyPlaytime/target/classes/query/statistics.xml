<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="query.statistics">

	<resultMap type="HashMap" id="joinGraph" >
		<id column="joinDate" property="joinDate" />
		<id column="joinCount" property="joinCount" />
	</resultMap>

	<select id="adminJoinStatistics" resultMap="joinGraph">
		Select TO_CHAR(m_regdate, 'yyyy-mm') as "해당 월", count(*) as "가입자 수"
        From member_tbl
        where m_status = 'active'
		group by TO_CHAR(m_regdate, 'yyyy-mm')
		order by TO_CHAR(m_regdate, 'yyyy-mm') desc
	</select>
	
	<!-- 
	<select id="adminReservationStatistics" resultMap="graph">
		Select TO_CHAR(r_startDate, 'yyyy-mm')as month , count(*) as reservation 
        From Reservation_tbl
        where r_approval = 'Y'
		group by TO_CHAR(r_startDate, 'yyyy-mm')
		order by TO_CHAR(r_startDate, 'yyyy-mm') desc
	</select>
	
	<select id="adminSalesStatistics" resultMap="graph" >
		Select TO_CHAR(r_startDate, 'yyyy-mm')as month , sum(r_payPrice)as r_payprice 
        From Reservation_tbl
        where r_approval = 'Y'
		group by TO_CHAR(r_startDate, 'yyyy-mm')
		order by TO_CHAR(r_startDate, 'yyyy-mm') desc
	</select>
	
	<select id="adminTodayJoinStatistics" resultMap="graph">
		Select TO_CHAR(m_regdate, 'yyyy-mm')as month , count(*) as reservation 
        From member_tbl
        where m_status = 'active' and m_regdate = sysdate
		group by TO_CHAR(m_regdate, 'yyyy-mm')
		order by TO_CHAR(m_regdate, 'yyyy-mm') desc
	</select> -->

</mapper>